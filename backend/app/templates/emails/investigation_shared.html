<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Investiga√ß√£o Compartilhada - AgroADB</title>
</head>
<body style="margin: 0; padding: 0; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif; background-color: #f3f4f6;">
    <table role="presentation" style="width: 100%; border-collapse: collapse; background-color: #f3f4f6;">
        <tr>
            <td style="padding: 40px 20px;">
                <!-- Main Container -->
                <table role="presentation" style="max-width: 600px; margin: 0 auto; background-color: white; border-radius: 12px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); overflow: hidden;">
                    
                    <!-- Header -->
                    <tr>
                        <td style="background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%); padding: 40px 32px; text-align: center;">
                            <h1 style="margin: 0; font-size: 32px; font-weight: 700; color: white; text-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                                ü§ù Investiga√ß√£o Compartilhada
                            </h1>
                            <p style="margin: 12px 0 0; font-size: 16px; color: rgba(255,255,255,0.9);">
                                AgroADB Intelligence Platform
                            </p>
                        </td>
                    </tr>
                    
                    <!-- Content -->
                    <tr>
                        <td style="padding: 40px 32px;">
                            
                            <!-- Greeting -->
                            <p style="margin: 0 0 24px; font-size: 18px; color: #374151;">
                                Ol√°, <strong style="color: #111827;">{{ user_name }}</strong>!
                            </p>
                            
                            <!-- Share Message -->
                            <div style="background-color: #f3e8ff; border-left: 4px solid #8b5cf6; padding: 20px; border-radius: 6px; margin: 0 0 32px;">
                                <p style="margin: 0 0 8px; font-size: 16px; font-weight: 600; color: #6b21a8;">
                                    Nova investiga√ß√£o compartilhada com voc√™!
                                </p>
                                <p style="margin: 0; font-size: 14px; color: #7c3aed; line-height: 1.6;">
                                    <strong>{{ shared_by_name }}</strong> compartilhou uma investiga√ß√£o e voc√™ agora tem acesso aos dados.
                                </p>
                            </div>
                            
                            <!-- Investigation Details -->
                            <h2 style="margin: 0 0 20px; font-size: 20px; font-weight: 600; color: #111827;">
                                üìã Detalhes da Investiga√ß√£o
                            </h2>
                            
                            <table role="presentation" style="width: 100%; border-collapse: collapse; margin-bottom: 32px;">
                                <tr>
                                    <td style="padding: 20px; background-color: #f9fafb; border-radius: 8px;">
                                        <table role="presentation" style="width: 100%;">
                                            <tr>
                                                <td style="padding: 12px 0; border-bottom: 1px solid #e5e7eb;">
                                                    <div style="font-size: 13px; color: #6b7280; margin-bottom: 4px;">Alvo da Investiga√ß√£o</div>
                                                    <div style="font-size: 18px; font-weight: 600; color: #111827;">{{ target_name }}</div>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td style="padding: 12px 0; border-bottom: 1px solid #e5e7eb;">
                                                    <div style="font-size: 13px; color: #6b7280; margin-bottom: 4px;">Compartilhado por</div>
                                                    <div style="font-size: 16px; font-weight: 500; color: #374151;">{{ shared_by_name }}</div>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td style="padding: 12px 0;">
                                                    <div style="font-size: 13px; color: #6b7280; margin-bottom: 8px;">Seu n√≠vel de acesso</div>
                                                    <div style="display: inline-block; padding: 8px 16px; background-color: #8b5cf6; color: white; border-radius: 20px; font-size: 14px; font-weight: 600;">
                                                        {{ permission_label }}
                                                    </div>
                                                </td>
                                            </tr>
                                        </table>
                                    </td>
                                </tr>
                            </table>
                            
                            <!-- Permissions Info -->
                            {% if permission_level == 'view' %}
                            <div style="background-color: #eff6ff; border: 1px solid #bfdbfe; padding: 16px; border-radius: 6px; margin: 0 0 32px;">
                                <p style="margin: 0; font-size: 13px; color: #1e40af; line-height: 1.6;">
                                    ‚ÑπÔ∏è <strong>Permiss√µes:</strong> Voc√™ pode visualizar todos os dados desta investiga√ß√£o, 
                                    mas n√£o pode fazer altera√ß√µes ou adicionar coment√°rios.
                                </p>
                            </div>
                            {% elif permission_level == 'comment' %}
                            <div style="background-color: #eff6ff; border: 1px solid #bfdbfe; padding: 16px; border-radius: 6px; margin: 0 0 32px;">
                                <p style="margin: 0; font-size: 13px; color: #1e40af; line-height: 1.6;">
                                    ‚ÑπÔ∏è <strong>Permiss√µes:</strong> Voc√™ pode visualizar os dados e adicionar coment√°rios, 
                                    mas n√£o pode fazer edi√ß√µes na investiga√ß√£o.
                                </p>
                            </div>
                            {% elif permission_level == 'edit' %}
                            <div style="background-color: #eff6ff; border: 1px solid #bfdbfe; padding: 16px; border-radius: 6px; margin: 0 0 32px;">
                                <p style="margin: 0; font-size: 13px; color: #1e40af; line-height: 1.6;">
                                    ‚ÑπÔ∏è <strong>Permiss√µes:</strong> Voc√™ pode visualizar, comentar e editar esta investiga√ß√£o. 
                                    Suas altera√ß√µes ser√£o registradas no hist√≥rico.
                                </p>
                            </div>
                            {% elif permission_level == 'admin' %}
                            <div style="background-color: #fef3c7; border: 1px solid #fcd34d; padding: 16px; border-radius: 6px; margin: 0 0 32px;">
                                <p style="margin: 0; font-size: 13px; color: #92400e; line-height: 1.6;">
                                    ‚ö†Ô∏è <strong>Permiss√µes de Administrador:</strong> Voc√™ tem controle total sobre esta investiga√ß√£o, 
                                    incluindo compartilhamento com outros usu√°rios e exclus√£o de dados.
                                </p>
                            </div>
                            {% endif %}
                            
                            <!-- CTA Button -->
                            <table role="presentation" style="width: 100%; margin: 0 0 32px;">
                                <tr>
                                    <td style="text-align: center;">
                                        <a href="{{ frontend_url }}/investigations/{{ investigation_id }}" 
                                           style="display: inline-block; 
                                                  background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%); 
                                                  color: white; 
                                                  padding: 16px 40px; 
                                                  text-decoration: none; 
                                                  border-radius: 8px; 
                                                  font-weight: 600;
                                                  font-size: 16px;
                                                  box-shadow: 0 4px 6px rgba(139, 92, 246, 0.3);
                                                  transition: all 0.3s;">
                                            Acessar Investiga√ß√£o ‚Üí
                                        </a>
                                    </td>
                                </tr>
                            </table>
                            
                            <!-- Collaboration Tips -->
                            <div style="background-color: #f0fdf4; border: 1px solid #bbf7d0; padding: 16px; border-radius: 6px; margin: 0 0 24px;">
                                <p style="margin: 0 0 12px; font-size: 14px; font-weight: 600; color: #166534;">
                                    üí° Dicas de Colabora√ß√£o:
                                </p>
                                <ul style="margin: 0; padding-left: 20px; font-size: 13px; color: #15803d; line-height: 1.8;">
                                    <li>Use coment√°rios para discutir descobertas com a equipe</li>
                                    <li>Adicione anota√ß√µes privadas para refer√™ncia pessoal</li>
                                    <li>Exporte relat√≥rios em PDF para apresenta√ß√µes</li>
                                    <li>Confira o hist√≥rico de altera√ß√µes para acompanhar o progresso</li>
                                </ul>
                            </div>
                            
                            <!-- Footer Message -->
                            <p style="margin: 0; font-size: 14px; color: #6b7280; line-height: 1.6;">
                                Esta √© uma notifica√ß√£o autom√°tica do sistema AgroADB. 
                                Para gerenciar suas prefer√™ncias de notifica√ß√£o, acesse as 
                                <a href="{{ frontend_url }}/settings/notifications" 
                                   style="color: #8b5cf6; text-decoration: none; font-weight: 500;">
                                    configura√ß√µes
                                </a>.
                            </p>
                        </td>
                    </tr>
                    
                    <!-- Footer -->
                    <tr>
                        <td style="padding: 24px 32px; border-top: 1px solid #e5e7eb; background-color: #f9fafb;">
                            <table role="presentation" style="width: 100%;">
                                <tr>
                                    <td style="text-align: center;">
                                        <p style="margin: 0 0 8px; font-size: 14px; font-weight: 600; color: #111827;">
                                            AgroADB
                                        </p>
                                        <p style="margin: 0 0 16px; font-size: 12px; color: #6b7280;">
                                            Sistema de Intelig√™ncia para Due Diligence Rural
                                        </p>
                                        <p style="margin: 0; font-size: 11px; color: #9ca3af;">
                                            ¬© {{ year }} AgroADB. Todos os direitos reservados.
                                        </p>
                                    </td>
                                </tr>
                            </table>
                        </td>
                    </tr>
                    
                </table>
            </td>
        </tr>
    </table>
</body>
</html>
